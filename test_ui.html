<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Testi UI ‚Äì Lennokit</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    button { margin: 5px 0; padding: 10px; }
    pre { background: #f4f4f4; padding: 10px; white-space: pre-wrap; }
  </style>
</head>
<body>
  <h2>Testi UI ‚Äì Lennokit</h2>
  <button onclick="haeLennokit()">Hae lennokit</button>
  <button onclick="haeAktiivinen()">Hae aktiivinen lennokki</button>
  <button onclick="haeOsat()">Hae osat ja kokoonpanot</button>
  <button onclick="haeYhteenveto()">Hae yhteenveto</button>

  <h3>Tulos:</h3>
  <pre id="tulos">Ei dataa viel√§</pre>

  <script>
    // üîπ Aseta t√§h√§n oma Apps Script web app URL
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzPipYxC6wXNnqc7oF9V9E3sGZEucmTu16fv77C3hn9Hc2hc0zDio-Adgmh_Jqxlqgy/exec";

    const tulosEl = document.getElementById('tulos');

    async function callAppsScript(action, body = {}) {
      try {
        let url = SCRIPT_URL;
        let options = {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ action, ...body })
        };

        // GET-toiminnot voidaan halutessa my√∂s tehd√§ query-paramina
        if (['haeLennokitAloitukseen', 'haeAktiivinenLennokkiId', 'haeOsat', 'haeYhteenveto'].includes(action)) {
          url += `?action=${action}`;
          options = { method: 'GET' };
        }

        const response = await fetch(url, options);

        if (!response.ok) throw new Error(`HTTP ${response.status}`);

        const data = await response.json();
        console.log(action, data);
        tulosEl.textContent = JSON.stringify(data, null, 2);

      } catch (err) {
        console.error(err);
        tulosEl.textContent = 'Virhe: ' + err;
      }
    }

    function haeLennokit() {
      callAppsScript('haeLennokitAloitukseen');
    }

    function haeAktiivinen() {
      callAppsScript('haeAktiivinenLennokkiId');
    }

    function haeOsat() {
      callAppsScript('haeOsat');
    }

    function haeYhteenveto() {
      callAppsScript('haeYhteenveto');
    }
  </script>
</body>
</html>
